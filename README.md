# generate_points_on_sphere

Generating uniformly distributed points on a unit sphere

The code in this repository is created by copying and modifying the codes present in this [page](http://corysimon.github.io/articles/uniformdistn-on-sphere/).

## Requirements
gcc 9.4.0 

More info on [compiler](#compiler)

## How to compile
```console
root@docker-desktop:/# cd /path/to/generate_points_on_sphere
root@docker-desktop:/generate_points_on_sphere# bash clean_build.sh
```

## How to run
```console
root@docker-desktop:/# cd /path/to/generate_points_on_sphere
root@docker-desktop:/generate_points_on_sphere# ./build/generate_points_on_sphere
```

## clean_build.sh
A trivial shell script that checks and deletes if `build` folder exists.
Calls the cmake and make to build and compile the source code

## CMakeLists.txt
A basic cmake file to specify C++ standard, build type and compile options

## generate_points_on_sphere.cpp
According to this [page](http://corysimon.github.io/articles/uniformdistn-on-sphere/) in spherical coordinates,

$$\theta \in [0, \ 2\pi]$$

is the azimuthal angle, and

$$\phi \in [0, \ \pi]$$

is the polar angle.
$$x = \sin(\phi)\cos(\theta)$$
$$y = \sin(\phi)\sin(\theta)$$
$$z = \cos(\phi)$$

A struct named `Point` is used to represent this 5 floating point values. The constructor implements the formulas above.

The `utility` namespace holds two lambdas. The first one is used to construct a random number generator in real numbers. In order to parametrize the random number generator, it is wrapped by an outer lambda. The outer lambda takes two arguments which represents `min` and `max` values to be generated by the inner lambda. The outer lambda passes this parameters to distribution object([std::uniform_real_distribution](https://en.cppreference.com/w/cpp/numeric/random/uniform_real_distribution)) in the capture clause of the inner lambda. The generator object is initialized by calling the [std::random_device](https://en.cppreference.com/w/cpp/numeric/random/random_device). The `mutable` keyword is necessary because every call to the distribution object also uses the generator object which changes the internal state of the generator.

The second lambda is used to generate a csv file. It takes a `std::vector` of `Point` by `const &` and a filename as input and outputs the by using [std::ofstream](https://en.cppreference.com/w/cpp/io/basic_ofstream).

The `etkin` namespace contains the main lambda that generates the `std::vector` of `Point`. The `theta` and `phi` is generated by calling the random number generator and mapping the results to the correct range specified by the formulas above. The calculation of the `x`, `y` and `z` handled by the constructor of the `Point`.

## Compiler
```console
root@docker-desktop:/generate_points_on_sphere$ g++ -v
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/9/lto-wrapper
OFFLOAD_TARGET_NAMES=nvptx-none:hsa
OFFLOAD_TARGET_DEFAULT=1
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu 9.4.0-1ubuntu1~20.04.1' --with-bugurl=file:///usr/share/doc/gcc-9/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++,gm2 --prefix=/usr --with-gcc-major-version-only --program-suffix=-9 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-plugin --enable-default-pie --with-system-zlib --with-target-system-zlib=auto --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none=/build/gcc-9-Av3uEd/gcc-9-9.4.0/debian/tmp-nvptx/usr,hsa --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 9.4.0 (Ubuntu 9.4.0-1ubuntu1~20.04.1)
```

```console
root@docker-desktop:/generate_points_on_sphere$ gcc -v
Using built-in specs.
COLLECT_GCC=gcc
COLLECT_LTO_WRAPPER=/usr/lib/gcc/x86_64-linux-gnu/9/lto-wrapper
OFFLOAD_TARGET_NAMES=nvptx-none:hsa
OFFLOAD_TARGET_DEFAULT=1
Target: x86_64-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu 9.4.0-1ubuntu1~20.04.1' --with-bugurl=file:///usr/share/doc/gcc-9/README.Bugs --enable-languages=c,ada,c++,go,brig,d,fortran,objc,obj-c++,gm2 --prefix=/usr --with-gcc-major-version-only --program-suffix=-9 --program-prefix=x86_64-linux-gnu- --enable-shared --enable-linker-build-id --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --libdir=/usr/lib --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --with-default-libstdcxx-abi=new --enable-gnu-unique-object --disable-vtable-verify --enable-plugin --enable-default-pie --with-system-zlib --with-target-system-zlib=auto --enable-objc-gc=auto --enable-multiarch --disable-werror --with-arch-32=i686 --with-abi=m64 --with-multilib-list=m32,m64,mx32 --enable-multilib --with-tune=generic --enable-offload-targets=nvptx-none=/build/gcc-9-Av3uEd/gcc-9-9.4.0/debian/tmp-nvptx/usr,hsa --without-cuda-driver --enable-checking=release --build=x86_64-linux-gnu --host=x86_64-linux-gnu --target=x86_64-linux-gnu
Thread model: posix
gcc version 9.4.0 (Ubuntu 9.4.0-1ubuntu1~20.04.1)
```
